{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/tarea.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction TareaListComponent_tr_25_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function TareaListComponent_tr_25_button_11_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const tarea_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.marcarComoCompletada(tarea_r1));\n    });\n    i0.ɵɵtext(1, \" Marcar como completada \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TareaListComponent_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtemplate(11, TareaListComponent_tr_25_button_11_Template, 2, 0, \"button\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const tarea_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tarea_r1.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 5, tarea_r1.fechaLimite));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(tarea_r1.completada ? \"S\\u00ED\" : \"No\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tarea_r1.prioridad);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !tarea_r1.completada);\n  }\n}\nexport let TareaListComponent = /*#__PURE__*/(() => {\n  class TareaListComponent {\n    constructor(tareaService) {\n      this.tareaService = tareaService;\n      this.tareas = [];\n      this.filtro = 'todas';\n    }\n    ngOnInit() {\n      this.obtenerTareas();\n    }\n    obtenerTareas() {\n      this.tareaService.getTareas().subscribe(data => {\n        this.tareas = data;\n      });\n    }\n    get tareasFiltradas() {\n      if (this.filtro === 'completadas') {\n        return this.tareas.filter(t => t.completada);\n      } else if (this.filtro === 'pendientes') {\n        return this.tareas.filter(t => !t.completada);\n      }\n      return this.tareas;\n    }\n    marcarComoCompletada(tarea) {\n      const tareaActualizada = {\n        ...tarea,\n        completada: true\n      };\n      this.tareaService.actualizarTarea(tarea.id, tareaActualizada).subscribe({\n        next: () => {\n          alert('La tarea fue marcada como completada.');\n          this.obtenerTareas(); // recarga lista\n        },\n\n        error: err => {\n          console.error('Error al actualizar la tarea:', err);\n          alert('Ocurrió un error al marcar la tarea como completada.');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function TareaListComponent_Factory(t) {\n        return new (t || TareaListComponent)(i0.ɵɵdirectiveInject(i1.TareaService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TareaListComponent,\n        selectors: [[\"app-tarea-list\"]],\n        decls: 26,\n        vars: 2,\n        consts: [[\"for\", \"filtro\"], [\"id\", \"filtro\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"todas\"], [\"value\", \"completadas\"], [\"value\", \"pendientes\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"]],\n        template: function TareaListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h2\");\n            i0.ɵɵtext(1, \"Lista de Tareas\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"label\", 0);\n            i0.ɵɵtext(3, \"Filtrar por estado:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"select\", 1);\n            i0.ɵɵlistener(\"ngModelChange\", function TareaListComponent_Template_select_ngModelChange_4_listener($event) {\n              return ctx.filtro = $event;\n            });\n            i0.ɵɵelementStart(5, \"option\", 2);\n            i0.ɵɵtext(6, \"Todas\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"option\", 3);\n            i0.ɵɵtext(8, \"Completadas\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"option\", 4);\n            i0.ɵɵtext(10, \"Pendientes\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(11, \"br\")(12, \"br\");\n            i0.ɵɵelementStart(13, \"table\")(14, \"tr\")(15, \"th\");\n            i0.ɵɵtext(16, \"T\\u00EDtulo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"th\");\n            i0.ɵɵtext(18, \"Fecha l\\u00EDmite\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"th\");\n            i0.ɵɵtext(20, \"Completada\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"th\");\n            i0.ɵɵtext(22, \"Prioridad\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"th\");\n            i0.ɵɵtext(24, \"Acciones\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(25, TareaListComponent_tr_25_Template, 12, 7, \"tr\", 5);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.filtro);\n            i0.ɵɵadvance(21);\n            i0.ɵɵproperty(\"ngForOf\", ctx.tareasFiltradas);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, i2.DatePipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return TareaListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}